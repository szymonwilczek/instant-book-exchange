import { NextRequest, NextResponse } from "next/server";
import connectToDB from "@/lib/db/connect";
import Achievement from "@/lib/models/Achievement";

const achievements = [
  // ===== Exchange Master (Mistrz Wymian) =====
  {
    id: "exchange_master_bronze",
    seriesId: "exchange_master",
    seriesName: "Mistrz Wymian",
    name: "Pierwszy Tom w Obiegu",
    description:
      "KaÅ¼dy mistrz zaczyna od jednego tomu - ten wÅ‚aÅ›nie znalazÅ‚ nowego wÅ‚aÅ›ciciela",
    icon: "ğŸ“–",
    tier: "bronze",
    category: "trading",
    points: 10,
    requirement: { completedTransactions: 1 },
  },
  {
    id: "exchange_master_silver",
    seriesId: "exchange_master",
    seriesName: "Mistrz Wymian",
    name: "RÄ™ka Kupca",
    description: "Twoje transakcje stajÄ… siÄ™ pewne jak TwÃ³j uÅ›cisk dÅ‚oni",
    icon: "ğŸ¤",
    tier: "silver",
    category: "trading",
    points: 25,
    requirement: { completedTransactions: 5 },
  },
  {
    id: "exchange_master_gold",
    seriesId: "exchange_master",
    seriesName: "Mistrz Wymian",
    name: "DoÅ›wiadczony Handlarz",
    description:
      "Znasz juÅ¼ wartoÅ›Ä‡ ksiÄ™gi - nie kaÅ¼dy potrafi handlowaÄ‡ z honorem",
    icon: "âš–ï¸",
    tier: "gold",
    category: "trading",
    points: 50,
    requirement: { completedTransactions: 25 },
  },
  {
    id: "exchange_master_platinum",
    seriesId: "exchange_master",
    seriesName: "Mistrz Wymian",
    name: "Legenda Wymian",
    description:
      "OpowiadajÄ… o tobie legendy - podobno potrafisz wymieniÄ‡ atrament na zÅ‚oto",
    icon: "ğŸ‘‘",
    tier: "platinum",
    category: "trading",
    points: 100,
    requirement: { completedTransactions: 100 },
  },

  // ===== Trusted Trader (Zaufany Handlarz) =====
  {
    id: "trusted_trader_bronze",
    seriesId: "trusted_trader",
    seriesName: "Zaufany Handlarz",
    name: "Godny Zaufania",
    description:
      "Twoje imiÄ™ pojawia siÄ™ na ustach kupcÃ³w - i to w pozytywnych kuluarach",
    icon: "âœ…",
    tier: "bronze",
    category: "reputation",
    points: 10,
    requirement: { positiveReviews: 5 },
  },
  {
    id: "trusted_trader_silver",
    seriesId: "trusted_trader",
    seriesName: "Zaufany Handlarz",
    name: "Ceniony Antykwariusz",
    description: "PonoÄ‡ potrafisz znaleÅºÄ‡ tomy, o ktÃ³rych zapomniaÅ‚ sam czas",
    icon: "ğŸ“š",
    tier: "silver",
    category: "reputation",
    points: 25,
    requirement: { positiveReviews: 25 },
  },
  {
    id: "trusted_trader_gold",
    seriesId: "trusted_trader",
    seriesName: "Zaufany Handlarz",
    name: "SÅ‚awa na Szlaku",
    description: "PodrÃ³Å¼ni witajÄ… ciÄ™ jak starego przyjaciela",
    icon: "ğŸŒŸ",
    tier: "gold",
    category: "reputation",
    points: 50,
    requirement: { positiveReviews: 50 },
  },
  {
    id: "trusted_trader_platinum",
    seriesId: "trusted_trader",
    seriesName: "Zaufany Handlarz",
    name: "Ikona SalonÃ³w",
    description: "Twoja reputacja wyprzedza ciÄ™ o parÄ™ krokÃ³w przyjacielu",
    icon: "ğŸ’",
    tier: "platinum",
    category: "reputation",
    points: 100,
    requirement: { positiveReviews: 100 },
  },

  // ===== Perfect Rating (Perfekcyjna Ocena) =====
  {
    id: "perfect_rating_bronze",
    seriesId: "perfect_rating",
    seriesName: "Perfekcyjna Ocena",
    name: "Perfekcyjny Sprzedawca",
    description: "Transakcje koÅ„czÄ… siÄ™ uÅ›miechem - nie tylko twoim :)",
    icon: "ğŸ˜Š",
    tier: "bronze",
    category: "reputation",
    points: 15,
    requirement: { averageRating: 5.0, minReviews: 5 },
  },
  {
    id: "perfect_rating_silver",
    seriesId: "perfect_rating",
    seriesName: "Perfekcyjna Ocena",
    name: "SÅ‚owo jak PieczÄ™Ä‡",
    description: "Obietnica raz dana trwa wiecznie",
    icon: "ğŸ”",
    tier: "silver",
    category: "reputation",
    points: 30,
    requirement: { averageRating: 5.0, minReviews: 15 },
  },
  {
    id: "perfect_rating_gold",
    seriesId: "perfect_rating",
    seriesName: "Perfekcyjna Ocena",
    name: "ZÅ‚ota Miara",
    description: "WÅ›rÃ³d mistrzÃ³w Twoje rzemiosÅ‚o mierzy siÄ™ w karatach",
    icon: "â­",
    tier: "gold",
    category: "reputation",
    points: 60,
    requirement: { averageRating: 5.0, minReviews: 50 },
  },
  {
    id: "perfect_rating_platinum",
    seriesId: "perfect_rating",
    seriesName: "Perfekcyjna Ocena",
    name: "WzÃ³r DoskonaÅ‚oÅ›ci",
    description:
      "Twoje imiÄ™ zapisano w ksiÄ™dze ideaÅ‚Ã³w - maÅ‚o kto siÄ™ tam znajduje. Gratulujemy.",
    icon: "ğŸ†",
    tier: "platinum",
    category: "reputation",
    points: 120,
    requirement: { averageRating: 5.0, minReviews: 100 },
  },

  // ===== Book Collector (Kolekcjoner KsiÄ…Å¼ek) =====
  {
    id: "book_collector_bronze",
    seriesId: "book_collector",
    seriesName: "Kolekcjoner KsiÄ…Å¼ek",
    name: "Pierwszy Zakurzony Tom",
    description: "Zawsze gdzieÅ› jest poczÄ…tek",
    icon: "ğŸ“•",
    tier: "bronze",
    category: "collection",
    points: 5,
    requirement: { totalBooksAdded: 5 },
  },
  {
    id: "book_collector_silver",
    seriesId: "book_collector",
    seriesName: "Kolekcjoner KsiÄ…Å¼ek",
    name: "Opiekun PÃ³Å‚ek",
    description: "Zbiory rosnÄ…, a kurz zaczyna szeptaÄ‡ opowieÅ›ci o wÅ‚aÅ›cicielu",
    icon: "ğŸ“š",
    tier: "silver",
    category: "collection",
    points: 20,
    requirement: { totalBooksAdded: 25 },
  },
  {
    id: "book_collector_gold",
    seriesId: "book_collector",
    seriesName: "Kolekcjoner KsiÄ…Å¼ek",
    name: "Architekt Biblioteki",
    description: "Budujesz miejsce, w ktÃ³rym kaÅ¼da ksiÄ…Å¼ka znajdzie dach",
    icon: "ğŸ›ï¸",
    tier: "gold",
    category: "collection",
    points: 40,
    requirement: { totalBooksAdded: 100 },
  },
  {
    id: "book_collector_platinum",
    seriesId: "book_collector",
    seriesName: "Kolekcjoner KsiÄ…Å¼ek",
    name: "StraÅ¼nik Wiedzy",
    description: "W Twoich regaÅ‚ach ukryte sÄ… sekrety dawnych mistrzÃ³w",
    icon: "ğŸ—ï¸",
    tier: "platinum",
    category: "collection",
    points: 80,
    requirement: { totalBooksAdded: 250 },
  },

  // ===== Social Butterfly (Towarzyski Motyl) =====
  {
    id: "social_butterfly_bronze",
    seriesId: "social_butterfly",
    seriesName: "Towarzyski Motyl",
    name: "Towarzysz RozmÃ³w",
    description: "KaÅ¼dy lubi dobrÄ… historiÄ™",
    icon: "ğŸ’¬",
    tier: "bronze",
    category: "community",
    points: 5,
    requirement: { conversationsStarted: 5 },
  },
  {
    id: "social_butterfly_silver",
    seriesId: "social_butterfly",
    seriesName: "Towarzyski Motyl",
    name: "ÅÄ…cznik SpoÅ‚ecznoÅ›ci",
    description: "ÅÄ…czysz ludzi jak most nad dolinÄ… pomysÅ‚Ã³w",
    icon: "ğŸŒ‰",
    tier: "silver",
    category: "community",
    points: 20,
    requirement: { conversationsStarted: 25 },
  },
  {
    id: "social_butterfly_gold",
    seriesId: "social_butterfly",
    seriesName: "Towarzyski Motyl",
    name: "Serce Obozu",
    description:
      "WokÃ³Å‚ Ciebie gromadzÄ… siÄ™ inni by wymieniaÄ‡ opowieÅ›ci przy ognisku",
    icon: "ğŸ”¥",
    tier: "gold",
    category: "community",
    points: 40,
    requirement: { conversationsStarted: 100 },
  },
  {
    id: "social_butterfly_platinum",
    seriesId: "social_butterfly",
    seriesName: "Towarzyski Motyl",
    name: "Ambasador",
    description: "Twoje imiÄ™ otwiera drzwi szybciej niÅ¼ jakikolwiek klucz",
    icon: "ğŸ—ï¸",
    tier: "platinum",
    category: "community",
    points: 80,
    requirement: { conversationsStarted: 250 },
  },

  // ===== Generous Giver (Hojny Dawca) =====
  {
    id: "generous_giver_bronze",
    seriesId: "generous_giver",
    seriesName: "Hojny Dawca",
    name: "Hojny Debiut",
    description: "Najmniejszy dar zostawia trwalszy Å›lad niÅ¼ zÅ‚oto",
    icon: "ğŸ",
    tier: "bronze",
    category: "community",
    points: 10,
    requirement: { freeGiveaways: 1 },
  },
  {
    id: "generous_giver_silver",
    seriesId: "generous_giver",
    seriesName: "Hojny Dawca",
    name: "Filantrop z Doliny",
    description: "HojnoÅ›Ä‡ rozbrzmiewa echem wÅ›rÃ³d wzgÃ³rz",
    icon: "ğŸŒ„",
    tier: "silver",
    category: "community",
    points: 30,
    requirement: { freeGiveaways: 5 },
  },
  {
    id: "generous_giver_gold",
    seriesId: "generous_giver",
    seriesName: "Hojny Dawca",
    name: "Mecenas Literatury",
    description: "Twoje wsparcie zaczyna stawaÄ‡ siÄ™ nieocenione",
    icon: "ğŸ“œ",
    tier: "gold",
    category: "community",
    points: 60,
    requirement: { freeGiveaways: 20 },
  },
  {
    id: "generous_giver_platinum",
    seriesId: "generous_giver",
    seriesName: "Hojny Dawca",
    name: "ÅšwiÄ™ty ZapisÃ³w",
    description: "NiektÃ³rzy modlÄ… siÄ™ o mÄ…droÅ›Ä‡, ty po prostu jÄ… rozdajesz",
    icon: "ğŸ•Šï¸",
    tier: "platinum",
    category: "community",
    points: 120,
    requirement: { freeGiveaways: 50 },
  },

  // ===== Thoughtful Reviewer (Wnikliwy Recenzent) =====
  {
    id: "thoughtful_reviewer_bronze",
    seriesId: "thoughtful_reviewer",
    seriesName: "Wnikliwy Recenzent",
    name: "UwaÅ¼ny Skryba",
    description: "Twoje sÅ‚owa waÅ¼Ä… wiÄ™cej niÅ¼ niejedna ksiÄ™ga, ktÃ³rÄ… oceniasz",
    icon: "âœï¸",
    tier: "bronze",
    category: "community",
    points: 5,
    requirement: { detailedReviews: 5 },
  },
  {
    id: "thoughtful_reviewer_silver",
    seriesId: "thoughtful_reviewer",
    seriesName: "Wnikliwy Recenzent",
    name: "Kronikarz ZdarzeÅ„",
    description:
      "Zapisujesz historie tak, Å¼e inni czujÄ… jakby sami w nich uczestniczyli",
    icon: "ğŸ“–",
    tier: "silver",
    category: "community",
    points: 20,
    requirement: { detailedReviews: 25 },
  },
  {
    id: "thoughtful_reviewer_gold",
    seriesId: "thoughtful_reviewer",
    seriesName: "Wnikliwy Recenzent",
    name: "Krytyk Literacki",
    description:
      "Twoje recenzje potrafiÄ… podnieÅ›Ä‡ lub zÅ‚amaÄ‡ autorskie serca - delikatnie, lecz celnie",
    icon: "ğŸ­",
    tier: "gold",
    category: "community",
    points: 40,
    requirement: { detailedReviews: 100 },
  },
  {
    id: "thoughtful_reviewer_platinum",
    seriesId: "thoughtful_reviewer",
    seriesName: "Wnikliwy Recenzent",
    name: "Guru Opinii",
    description:
      "Nawet mÄ™drcy pytajÄ… ciÄ™ o zdanie, zanim postawiÄ… kropkÄ™ na koÅ„cu zdania",
    icon: "ğŸ§™",
    tier: "platinum",
    category: "community",
    points: 80,
    requirement: { detailedReviews: 250 },
  },

  // ===== Loyal Member (Lojalny CzÅ‚onek) =====
  {
    id: "loyal_member_bronze",
    seriesId: "loyal_member",
    seriesName: "Lojalny CzÅ‚onek",
    name: "Siedem Dni na Szlaku",
    description: "TydzieÅ„ to dopiero poczÄ…tek wÄ™drÃ³wki - ale znasz juÅ¼ drogÄ™",
    icon: "ğŸ—ºï¸",
    tier: "bronze",
    category: "activity",
    points: 10,
    requirement: { loginStreak: 7 },
  },
  {
    id: "loyal_member_silver",
    seriesId: "loyal_member",
    seriesName: "Lojalny CzÅ‚onek",
    name: "MiesiÄ…c PodrÃ³Å¼nika",
    description: "SÅ‚oÅ„ce wschodzi, ksiÄ™Å¼yÄ‡ gaÅ›nie, a ty wciÄ…Å¼ tu jesteÅ›",
    icon: "ğŸŒ™",
    tier: "silver",
    category: "activity",
    points: 30,
    requirement: { loginStreak: 30 },
  },
  {
    id: "loyal_member_gold",
    seriesId: "loyal_member",
    seriesName: "Lojalny CzÅ‚onek",
    name: "NieÅ›miertelny Czytelnik",
    description:
      "Nie ma takiej nocy, ktÃ³ra zatrzymaÅ‚aby ciÄ™ przed kolejnym rozdziaÅ‚em",
    icon: "ğŸ“š",
    tier: "gold",
    category: "activity",
    points: 60,
    requirement: { loginStreak: 100 },
  },
  {
    id: "loyal_member_platinum",
    seriesId: "loyal_member",
    seriesName: "Lojalny CzÅ‚onek",
    name: "Rok Kronik",
    description: "Twoja obecnoÅ›Ä‡ zostaÅ‚a zapisana w gwiazdach",
    icon: "â­",
    tier: "platinum",
    category: "activity",
    points: 120,
    requirement: { loginStreak: 365 },
  },

  // ===== SPECIAL: Single Achievement (bez serii) =====
  {
    id: "pioneer",
    seriesId: "pioneer",
    seriesName: "Pionier",
    name: "Pionier",
    description: "ByÅ‚eÅ› tu zanim pojawiÅ‚y siÄ™ mapy",
    icon: "ğŸš©",
    tier: "platinum",
    category: "special",
    points: 150,
    requirement: { joinedBefore: "2025-12-01" },
  },

  // ===== SPECIAL: Seasonal =====
  {
    id: "summer_harvest",
    seriesId: "summer_harvest",
    seriesName: "Letnie Zbiory",
    name: "Letnie Zbiory",
    description:
      "Lato przynosi owoce i nowe tomy, a twoje pÃ³Å‚ki uginajÄ… siÄ™ pod nimi",
    icon: "â˜€ï¸",
    tier: "gold",
    category: "special",
    points: 50,
    requirement: { exchangesInSummer: 10 },
  },
  {
    id: "new_year_contract",
    seriesId: "new_year_contract",
    seriesName: "Noworoczny Kontrakt",
    name: "Noworoczny Kontrakt",
    description:
      "Nowy rok, nowy handel, niech ten bÄ™dzie nawet lepszy od poprzedniego! WesoÅ‚ego Nowego Roku!",
    icon: "ğŸ†",
    tier: "gold",
    category: "special",
    points: 50,
    requirement: { exchangeOnNewYear: true },
  },

  // ===== SPECIAL: Milestone =====
  {
    id: "king_of_merchant_guild",
    seriesId: "king_of_merchant_guild",
    seriesName: "KrÃ³l Gildii Kupieckiej",
    name: "KrÃ³l Gildii Kupieckiej",
    description:
      "NaleÅ¼y Ci siÄ™ pokÅ‚on - twoje transakcje przeszÅ‚y do statusu legendy",
    icon: "ğŸ‘‘",
    tier: "platinum",
    category: "special",
    points: 200,
    requirement: { totalPoints: 10000 },
  },
  {
    id: "best_of_the_best",
    seriesId: "best_of_the_best",
    seriesName: "Najlepszy z Najlepszych",
    name: "Najlepszy z Najlepszych",
    description:
      "OsiÄ…gnÄ…Å‚eÅ› poziom, o ktÃ³rym inni mogÄ… przeczytaÄ‡ jedynie w bajkach",
    icon: "ğŸŒŸ",
    tier: "platinum",
    category: "special",
    points: 300,
    requirement: { rankingPosition: 1, rankingDays: 30 },
  },
];

export async function POST(req: NextRequest) {
  try {
    await connectToDB();

    await Achievement.deleteMany({});
    await Achievement.insertMany(achievements);

    return NextResponse.json({
      message: "Achievements seeded successfully",
      count: achievements.length,
    });
  } catch (error) {
    console.error("Error seeding achievements:", error);
    return NextResponse.json(
      { error: "Failed to seed achievements" },
      { status: 500 }
    );
  }
}
